import{d as P,c as X,a as n,n as Y,b as h,e,t as u,f as D,F as V,r as F,g as z,h as k,i as Z,o,_ as U,j as x,k as ee,w as te,l as le,m as ae,p as B,q as M,v as K,A as se}from"./index-D4AHbMld.js";const re={key:0},oe={key:0,class:"array-node"},ne={key:0,class:"text-blue-700 dark:text-blue-300 font-medium"},de={class:"text-gray-600 dark:text-gray-400"},ue={key:1,class:"ml-4"},ie={key:1,class:"object-node"},ce={key:0,class:"text-blue-700 dark:text-blue-300 font-medium"},ve={class:"text-gray-600 dark:text-gray-400"},pe={key:1,class:"ml-4"},ye={key:1,class:"leaf-node"},ge={key:0,class:"text-blue-700 dark:text-blue-300 font-medium"},be=P({__name:"JsonTreeDisplay",props:{data:{},level:{default:0},expandedLevels:{},keyName:{default:""},path:{default:""}},emits:["toggle"],setup(j,{emit:c}){const v=j,w=c,p=X(()=>v.path||`level_${v.level}`),N=()=>{w("toggle",p.value)},d=t=>t===null?"null":typeof t=="string"?`"${t}"`:typeof t=="boolean"||typeof t=="number"?t.toString():String(t),_=t=>t===null?"text-gray-500 dark:text-gray-400":typeof t=="string"?"text-green-600 dark:text-green-400":typeof t=="boolean"?"text-blue-600 dark:text-blue-400":typeof t=="number"?"text-orange-600 dark:text-orange-400":"text-gray-900 dark:text-gray-100";return(t,y)=>{const b=Z("JsonTreeDisplay",!0);return o(),n("div",{class:"json-tree-node",style:Y({paddingLeft:t.level*20+"px"})},[typeof t.data=="object"&&t.data!==null?(o(),n("div",re,[Array.isArray(t.data)?(o(),n("div",oe,[t.keyName?(o(),n("span",ne,'"'+u(t.keyName)+'": ',1)):h("",!0),e("span",{onClick:N,class:"cursor-pointer text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200"},[D(u(t.expandedLevels.has(p.value)?"▼":"▶")+" ",1),e("span",de,"["+u(t.data.length)+"]",1)]),t.expandedLevels.has(p.value)?(o(),n("div",ue,[(o(!0),n(V,null,F(t.data,($,s)=>(o(),z(b,{key:s,data:$,level:t.level+1,"expanded-levels":t.expandedLevels,"key-name":String(s),path:p.value+"_"+s,onToggle:y[0]||(y[0]=S=>t.$emit("toggle",S))},null,8,["data","level","expanded-levels","key-name","path"]))),128))])):h("",!0)])):(o(),n("div",ie,[t.keyName?(o(),n("span",ce,'"'+u(t.keyName)+'": ',1)):h("",!0),e("span",{onClick:N,class:"cursor-pointer text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-200"},[D(u(t.expandedLevels.has(p.value)?"▼":"▶")+" ",1),e("span",ve,u("{"+Object.keys(t.data).length+"}"),1)]),t.expandedLevels.has(p.value)?(o(),n("div",pe,[(o(!0),n(V,null,F(t.data,($,s)=>(o(),z(b,{key:s,data:$,level:t.level+1,"expanded-levels":t.expandedLevels,"key-name":String(s),path:p.value+"_"+s,onToggle:y[1]||(y[1]=S=>t.$emit("toggle",S))},null,8,["data","level","expanded-levels","key-name","path"]))),128))])):h("",!0)]))])):(o(),n("div",ye,[t.keyName?(o(),n("span",ge,'"'+u(t.keyName)+'": ',1)):h("",!0),e("span",{class:k(_(t.data))},u(d(t.data)),3)]))],4)}}}),fe=U(be,[["__scopeId","data-v-f23e346f"]]),xe={key:0,class:"fixed top-4 right-4 z-10"},ke={class:"flex flex-wrap gap-3 justify-center"},he=["disabled"],me=["disabled"],_e=["title"],we=["disabled"],Se={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2"},Ne={class:"flex items-center space-x-2 text-sm"},$e={class:"text-gray-500 dark:text-gray-400"},Je={class:"absolute top-3 right-3"},Ce={key:0,class:"w-3 h-3 bg-green-500 rounded-full",title:"有效的JSON"},je={key:1,class:"w-3 h-3 bg-red-500 rounded-full",title:"无效的JSON"},Oe={key:2,class:"w-3 h-3 bg-gray-400 rounded-full",title:"等待输入"},Ee={key:0,class:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg"},Ae={class:"flex items-start space-x-2"},Te={class:"text-sm text-red-600 dark:text-red-300 mt-1"},Le={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2"},De={class:"flex items-center space-x-2 text-sm"},Ve={class:"text-gray-500 dark:text-gray-400"},Fe={key:0,class:"flex items-center space-x-2"},ze={class:"flex items-center space-x-1"},Be=["disabled"],Me={class:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded"},Ke=["disabled"],Pe={class:"json-tree-container"},Ue={key:0,class:"absolute bottom-3 right-3 bg-white dark:bg-gray-800 px-2 py-1 rounded text-xs text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-gray-600"},Ie={key:1,class:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4"},Re=P({__name:"JsonFormatter",setup(j){const c=x(""),v=x(""),w=x(""),p=x("empty"),N=x(!1),d=x(!1),_=x(!1),t=x(null),y=x(1),b=x(new Set),$=x(null),s=ee({keys:0,values:0,depth:0}),S=()=>{if(!c.value.trim()){p.value="empty",w.value="";return}try{JSON.parse(c.value),p.value="valid",w.value=""}catch(l){p.value="invalid",w.value=l.message}},O=l=>{s.keys=0,s.values=0,s.depth=0;const a=(r,g=1)=>{if(s.depth=Math.max(s.depth,g),Array.isArray(r))s.values+=r.length,r.forEach(i=>{typeof i=="object"&&i!==null&&a(i,g+1)});else if(typeof r=="object"&&r!==null){const i=Object.keys(r);s.keys+=i.length,i.forEach(f=>{const m=r[f];typeof m=="object"&&m!==null?a(m,g+1):s.values++})}};try{a(l)}catch(r){console.error("统计计算错误:",r)}},E=()=>{try{const l=JSON.parse(c.value);v.value=JSON.stringify(l,null,2),t.value=l,O(l),b.value=new Set(["level_0"]),y.value=1}catch(l){v.value="格式化失败："+l.message,t.value=null}},A=()=>{try{const l=JSON.parse(c.value);v.value=JSON.stringify(l),t.value=l,O(l),_.value=!1}catch(l){v.value="压缩失败："+l.message,t.value=null}},I=()=>{c.value="",v.value="",w.value="",p.value="empty",s.keys=0,s.values=0,s.depth=0},R=()=>{c.value=`{
  "name": "张三",
  "age": 30,
  "email": "zhangsan@example.com",
  "address": {
    "city": "北京",
    "district": "朝阳区",
    "street": "三里屯街道"
  },
  "hobbies": ["阅读", "旅行", "编程"],
  "isActive": true,
  "profile": {
    "bio": "一名热爱技术的开发者",
    "social": {
      "github": "zhangsan",
      "twitter": "@zhangsan"
    }
  }
}`,S()},q=async()=>{try{await navigator.clipboard.writeText(v.value),N.value=!0,setTimeout(()=>{N.value=!1},2e3)}catch(l){console.error("复制失败:",l)}},C=()=>{d.value=!d.value},G=()=>{_.value=!_.value},H=()=>{if(!t.value)return;const l=new Set,a=(r,g="level_0")=>{l.add(g),Array.isArray(r)?r.forEach((i,f)=>{typeof i=="object"&&i!==null&&a(i,`${g}_${f}`)}):typeof r=="object"&&r!==null&&Object.keys(r).forEach(i=>{const f=r[i];typeof f=="object"&&f!==null&&a(f,`${g}_${i}`)})};a(t.value),b.value=l,y.value=s.depth},Q=()=>{b.value=new Set(["level_0"]),y.value=1},T=l=>{if(l<1||l>s.depth)return;const a=new Set,r=(g,i="level_0",f=0)=>{f<l&&(a.add(i),Array.isArray(g)?g.forEach((m,J)=>{typeof m=="object"&&m!==null&&r(m,`${i}_${J}`,f+1)}):typeof g=="object"&&g!==null&&Object.keys(g).forEach(m=>{const J=g[m];typeof J=="object"&&J!==null&&r(J,`${i}_${m}`,f+1)}))};r(t.value),b.value=a,y.value=l},W=l=>{b.value.has(l)?b.value.delete(l):b.value.add(l)},L=l=>{if(l.key==="Escape"&&d.value){l.preventDefault(),d.value=!1;return}(l.ctrlKey||l.metaKey)&&(l.key==="Enter"&&(l.preventDefault(),l.shiftKey?A():E()),l.key==="F11"&&(l.preventDefault(),C()))};return te(c,S),le(()=>{document.addEventListener("keydown",L)}),ae(()=>{document.removeEventListener("keydown",L)}),(l,a)=>(o(),n("div",{class:k(["space-y-6",{"fullscreen-container":d.value,"bg-white dark:bg-gray-900":d.value}]),ref_key:"containerRef",ref:$},[d.value?(o(),n("div",xe,[e("button",{onClick:C,class:"p-2 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg transition-colors",title:"退出全屏"},[...a[4]||(a[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):h("",!0),a[11]||(a[11]=e("div",{class:"text-center"},[e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-2"}," JSON格式化/压缩工具 "),e("p",{class:"text-gray-600 dark:text-gray-400 max-w-2xl mx-auto"}," 美化或压缩JSON数据，支持语法高亮、错误检测和一键复制。输入JSON数据后，选择格式化或压缩操作。 ")],-1)),e("div",ke,[e("button",{onClick:E,disabled:!c.value.trim(),class:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed"}," 📝 格式化 ",8,he),e("button",{onClick:A,disabled:!c.value.trim(),class:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed"}," 🗜️ 压缩 ",8,me),e("button",{onClick:C,class:"btn-secondary",title:d.value?"退出全屏":"进入全屏"},u(d.value?"🔳":"⛶")+" "+u(d.value?"退出全屏":"全屏"),9,_e),e("button",{onClick:G,disabled:!v.value,class:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed"},u(_.value?"📝":"🌳")+" "+u(_.value?"代码视图":"树形视图"),9,we),e("button",{onClick:I,class:"btn-secondary"}," 🗑️ 清空 "),e("button",{onClick:R,class:"btn-secondary"}," 📄 加载示例 ")]),e("div",{class:k(["responsive-grid-2",{"h-full":d.value}])},[e("div",{class:k(["space-y-3",{"h-full flex flex-col":d.value}])},[e("div",Se,[a[5]||(a[5]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," 输入JSON ",-1)),e("div",Ne,[e("span",$e," 字符数: "+u(c.value.length),1)])]),e("div",{class:k(["relative",{"flex-1":d.value}])},[M(e("textarea",{"onUpdate:modelValue":a[0]||(a[0]=r=>c.value=r),placeholder:"请输入要格式化的JSON数据...",class:k(["textarea-field",d.value?"h-full":"h-64 sm:h-80 lg:h-96"]),onInput:S},null,34),[[K,c.value]]),e("div",Je,[p.value==="valid"?(o(),n("div",Ce)):p.value==="invalid"?(o(),n("div",je)):(o(),n("div",Oe))])],2),w.value?(o(),n("div",Ee,[e("div",Ae,[a[7]||(a[7]=e("span",{class:"text-red-500 mt-0.5"},"⚠️",-1)),e("div",null,[a[6]||(a[6]=e("p",{class:"text-sm font-medium text-red-800 dark:text-red-200"},"JSON格式错误",-1)),e("p",Te,u(w.value),1)])])])):h("",!0)],2),e("div",{class:k(["space-y-3",{"h-full flex flex-col":d.value}])},[e("div",Le,[a[9]||(a[9]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," 输出结果 ",-1)),e("div",De,[e("span",Ve," 字符数: "+u(v.value.length),1),_.value&&t.value?(o(),n("div",Fe,[a[8]||(a[8]=e("span",{class:"text-gray-500 dark:text-gray-400"},"层级:",-1)),e("button",{onClick:H,class:"text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800 transition-colors"}," 全展开 "),e("button",{onClick:Q,class:"text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800 transition-colors"}," 全折叠 "),e("div",ze,[e("button",{onClick:a[1]||(a[1]=r=>T(y.value-1)),disabled:y.value<=1,class:"text-xs px-1 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors disabled:opacity-50"}," - ",8,Be),e("span",Me,"第"+u(y.value)+"层",1),e("button",{onClick:a[2]||(a[2]=r=>T(y.value+1)),disabled:y.value>=s.depth,class:"text-xs px-1 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors disabled:opacity-50"}," + ",8,Ke)])])):h("",!0),v.value?(o(),n("button",{key:1,onClick:q,class:"px-2 py-1 bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300 rounded hover:bg-primary-200 dark:hover:bg-primary-800 transition-colors text-xs sm:text-sm"},u(N.value?"已复制!":"复制"),1)):h("",!0)])]),_.value&&t.value?(o(),n("div",{key:0,class:k(["relative",{"flex-1":d.value}])},[e("div",{class:k(["p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 overflow-auto",d.value?"h-full":"h-96"])},[e("div",Pe,[B(fe,{data:t.value,level:0,"expanded-levels":b.value,path:"level_0",onToggle:W},null,8,["data","expanded-levels"])])],2)],2)):(o(),n("div",{key:1,class:k(["relative",{"flex-1":d.value}])},[M(e("textarea",{"onUpdate:modelValue":a[3]||(a[3]=r=>v.value=r),readonly:"",placeholder:"格式化后的结果将显示在这里...",class:k(["textarea-field bg-gray-50 dark:bg-gray-900",d.value?"h-full":"h-64 sm:h-80 lg:h-96"])},null,2),[[K,v.value]]),s.keys>0?(o(),n("div",Ue," 键: "+u(s.keys)+" | 值: "+u(s.values)+" | 层级: "+u(s.depth),1)):h("",!0)],2))],2)],2),d.value?h("",!0):(o(),n("div",Ie,[...a[10]||(a[10]=[e("h4",{class:"font-semibold text-blue-900 dark:text-blue-100 mb-2"},"💡 使用提示",-1),e("ul",{class:"text-sm text-blue-800 dark:text-blue-200 space-y-1"},[e("li",null,"• 点击“全屏”按钮进入网页全屏模式，获得更大工作空间"),e("li",null,"• 使用“树形视图”查看JSON的层级结构，支持折叠/展开"),e("li",null,"• 层级控制：全展开、全折叠、逐层调节（+/-按钮）"),e("li",null,"• 键盘快捷键：Ctrl+Enter 格式化，Ctrl+Shift+Enter 压缩，ESC 退出全屏"),e("li",null,"• 支持复制结果、语法高亮和实时错误检测")],-1)])])),B(se,{position:"inline",class:"mx-auto"})],2))}}),Ge=U(Re,[["__scopeId","data-v-93f74906"]]);export{Ge as default};
