import{d as q,j as f,l as G,m as H,a as x,b as h,e as t,p as Q,u as X,q as O,x as E,t as u,f as L,n as Y,h as p,v as D,F as Z,r as ee,A as te,o as g,_ as se}from"./index-D4AHbMld.js";const ae={key:0,class:"fixed top-4 right-4 z-10"},re={class:"card p-6"},le={class:"flex flex-wrap items-center gap-4 mb-4"},oe={class:"flex items-center space-x-2"},ne={class:"flex items-center space-x-2"},de={class:"flex items-center space-x-2"},ie={class:"flex flex-wrap gap-3"},ue=["disabled"],ce=["title"],ve=["disabled"],xe=["disabled"],pe={key:1,class:"card p-6"},ge={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},me={class:"text-center"},be={class:"text-2xl font-bold text-green-600 dark:text-green-400"},ye={class:"text-center"},fe={class:"text-2xl font-bold text-red-600 dark:text-red-400"},he={class:"text-center"},ke={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},_e={class:"text-center"},we={class:"text-2xl font-bold text-gray-600 dark:text-gray-400"},Se={class:"mt-4 text-center"},Oe={class:"text-lg font-medium text-gray-900 dark:text-white"},Ve={class:"text-primary-600"},Je={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-2"},Ce={class:"mt-3 flex items-center justify-between text-sm"},Ne={class:"flex items-center space-x-4"},$e={class:"text-gray-500 dark:text-gray-400"},Ee={key:0,class:"flex items-center space-x-1"},Le={key:0,class:"mt-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg"},je={class:"text-sm text-red-600 dark:text-red-400"},Ae={class:"mt-3 flex items-center justify-between text-sm"},Re={class:"flex items-center space-x-4"},De={class:"text-gray-500 dark:text-gray-400"},Ue={key:0,class:"flex items-center space-x-1"},Me={key:0,class:"mt-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg"},ze={class:"text-sm text-red-600 dark:text-red-400"},Be={key:2,class:"card"},Fe={class:"p-4"},Ie={class:"space-y-3 max-h-96 overflow-y-auto"},Ke={class:"flex items-center space-x-2 mb-2"},Te={class:"text-sm font-mono text-gray-600 dark:text-gray-400"},We={class:"space-y-2 text-sm"},Pe={key:0,class:"flex items-start space-x-2"},qe={class:"text-red-600 dark:text-red-400 font-mono"},Ge={key:1,class:"flex items-start space-x-2"},He={class:"text-green-600 dark:text-green-400 font-mono"},Qe={key:3,class:"card p-6 text-center"},Xe=q({__name:"JsonCompare",setup(Ye){const c=f(""),v=f(""),_=f(""),w=f(""),b=f(!1),y=f(!1),o=f(null),i=f(!1),U=f(null),m=f({ignoreOrder:!1,ignoreCase:!1,ignoreWhitespace:!1}),J=()=>{if(!c.value.trim()){b.value=!1,_.value="";return}try{JSON.parse(c.value),b.value=!0,_.value=""}catch(s){b.value=!1,_.value=s instanceof Error?s.message:"æœªçŸ¥é”™è¯¯"}},C=()=>{if(!v.value.trim()){y.value=!1,w.value="";return}try{JSON.parse(v.value),y.value=!0,w.value=""}catch(s){y.value=!1,w.value=s instanceof Error?s.message:"æœªçŸ¥é”™è¯¯"}},k=()=>{if(!(!c.value.trim()||!v.value.trim())&&!(!b.value||!y.value))try{const s=JSON.parse(c.value),e=JSON.parse(v.value),a=N(s,e,""),r=B(a,s,e),n=F(r);o.value={differences:a,stats:r,similarity:n}}catch(s){console.error("æ¯”è¾ƒå¤±è´¥:",s)}},N=(s,e,a)=>{const r=[];if(s==null)return e!=null&&r.push({type:"added",path:a,newValue:e}),r;if(e==null)return r.push({type:"removed",path:a,oldValue:s}),r;if(Array.isArray(s)&&Array.isArray(e))return M(s,e,a);if(typeof s=="object"&&typeof e=="object")return z(s,e,a);const n=m.value.ignoreWhitespace&&typeof s=="string"?s.trim():s,l=m.value.ignoreWhitespace&&typeof e=="string"?e.trim():e,d=m.value.ignoreCase&&typeof n=="string"?n.toLowerCase():n,S=m.value.ignoreCase&&typeof l=="string"?l.toLowerCase():l;return d!==S&&r.push({type:"modified",path:a,oldValue:s,newValue:e}),r},M=(s,e,a)=>{const r=[];if(m.value.ignoreOrder){const n=new Set(s.map(d=>JSON.stringify(d))),l=new Set(e.map(d=>JSON.stringify(d)));n.forEach((d,S)=>{l.has(d)||r.push({type:"removed",path:`${a}[${S}]`,oldValue:JSON.parse(d)})}),l.forEach((d,S)=>{n.has(d)||r.push({type:"added",path:`${a}[${S}]`,newValue:JSON.parse(d)})})}else{const n=Math.max(s.length,e.length);for(let l=0;l<n;l++){const d=`${a}[${l}]`;l>=s.length?r.push({type:"added",path:d,newValue:e[l]}):l>=e.length?r.push({type:"removed",path:d,oldValue:s[l]}):r.push(...N(s[l],e[l],d))}}return r},z=(s,e,a)=>{const r=[];return new Set([...Object.keys(s),...Object.keys(e)]).forEach(l=>{const d=a?`${a}.${l}`:l;l in s?l in e?r.push(...N(s[l],e[l],d)):r.push({type:"removed",path:d,oldValue:s[l]}):r.push({type:"added",path:d,newValue:e[l]})}),r},B=(s,e,a)=>{const r={added:0,removed:0,modified:0,unchanged:0};s.forEach(l=>{r[l.type]++});const n=j(e)+j(a);return r.unchanged=Math.max(0,n-(r.added+r.removed+r.modified)),r},F=s=>{const e=s.added+s.removed+s.modified+s.unchanged;return e===0?100:Math.round(s.unchanged/e*100)},j=s=>typeof s!="object"||s===null?1:Array.isArray(s)?s.length:Object.keys(s).length,I=s=>({added:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",removed:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",modified:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"})[s],A=s=>({added:"æ–°å¢",removed:"åˆ é™¤",modified:"ä¿®æ”¹"})[s],V=s=>typeof s=="string"?`"${s}"`:typeof s=="object"?JSON.stringify(s):String(s),K=()=>{const s=c.value;c.value=v.value,v.value=s,J(),C(),b.value&&y.value&&k()},T=()=>{c.value="",v.value="",_.value="",w.value="",b.value=!1,y.value=!1,o.value=null},W=()=>{if(!o.value)return;let s=`# JSONæ¯”è¾ƒæŠ¥å‘Š

`;s+=`## æ¦‚è§ˆ
`,s+=`- æ–°å¢é¡¹: ${o.value.stats.added}
`,s+=`- åˆ é™¤é¡¹: ${o.value.stats.removed}
`,s+=`- ä¿®æ”¹é¡¹: ${o.value.stats.modified}
`,s+=`- æœªå˜æ›´: ${o.value.stats.unchanged}
`,s+=`- ç›¸ä¼¼åº¦: ${o.value.similarity}%

`,o.value.differences.length>0&&(s+=`## è¯¦ç»†å·®å¼‚
`,o.value.differences.forEach((n,l)=>{s+=`### ${l+1}. ${A(n.type)} - ${n.path}
`,n.oldValue!==void 0&&(s+=`- åŸå€¼: \`${V(n.oldValue)}\`
`),n.newValue!==void 0&&(s+=`- æ–°å€¼: \`${V(n.newValue)}\`
`),s+=`
`}));const e=new Blob([s],{type:"text/markdown"}),a=URL.createObjectURL(e),r=document.createElement("a");r.href=a,r.download="json-comparison-report.md",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)},P=()=>{const s={name:"å¼ ä¸‰",age:28,email:"zhangsan@example.com",hobbies:["é˜…è¯»","æ¸¸æ³³"],address:{city:"åŒ—äº¬",zipCode:"100001"}},e={name:"å¼ ä¸‰",age:29,email:"zhangsan@newdomain.com",hobbies:["é˜…è¯»","æ¸¸æ³³","ç¼–ç¨‹"],address:{city:"ä¸Šæµ·",zipCode:"200001"},phone:"13800138000"};c.value=JSON.stringify(s,null,2),v.value=JSON.stringify(e,null,2),J(),C(),b.value&&y.value&&k()},$=()=>{i.value=!i.value},R=s=>{if(s.key==="Escape"&&i.value){s.preventDefault(),i.value=!1;return}(s.ctrlKey||s.metaKey)&&(s.key==="Enter"&&(s.preventDefault(),k()),s.key==="F11"&&(s.preventDefault(),$()))};return G(()=>{document.addEventListener("keydown",R)}),H(()=>{document.removeEventListener("keydown",R)}),(s,e)=>(g(),x("div",{class:p(["space-y-6",{"fullscreen-container":i.value,"bg-white dark:bg-gray-900":i.value}]),ref_key:"containerRef",ref:U},[i.value?(g(),x("div",ae,[t("button",{onClick:$,class:"p-2 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg transition-colors",title:"é€€å‡ºå…¨å±"},[...e[5]||(e[5]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):h("",!0),t("div",re,[e[9]||(e[9]=t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"},"JSONæ¯”è¾ƒå·¥å…·",-1)),e[10]||(e[10]=t("p",{class:"text-gray-600 dark:text-gray-400 mb-4"}," æ¯”è¾ƒä¸¤ä¸ªJSONæ–‡ä»¶çš„å·®å¼‚ï¼Œé«˜äº®æ˜¾ç¤ºæ–°å¢ã€åˆ é™¤å’Œä¿®æ”¹çš„å†…å®¹ã€‚æ”¯æŒæ·±åº¦æ¯”è¾ƒå’Œè¯¦ç»†çš„å·®å¼‚æŠ¥å‘Šã€‚ ",-1)),t("div",le,[t("label",oe,[O(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>m.value.ignoreOrder=a),type:"checkbox",class:"rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500",onChange:k},null,544),[[E,m.value.ignoreOrder]]),e[6]||(e[6]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"å¿½ç•¥æ•°ç»„é¡ºåº",-1))]),t("label",ne,[O(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>m.value.ignoreCase=a),type:"checkbox",class:"rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500",onChange:k},null,544),[[E,m.value.ignoreCase]]),e[7]||(e[7]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"å¿½ç•¥å¤§å°å†™",-1))]),t("label",de,[O(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>m.value.ignoreWhitespace=a),type:"checkbox",class:"rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500",onChange:k},null,544),[[E,m.value.ignoreWhitespace]]),e[8]||(e[8]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"å¿½ç•¥ç©ºç™½å­—ç¬¦",-1))])]),t("div",ie,[t("button",{onClick:k,class:"btn-primary",disabled:!c.value.trim()||!v.value.trim()}," âš–ï¸ æ¯”è¾ƒ ",8,ue),t("button",{onClick:$,class:"btn-secondary",title:i.value?"é€€å‡ºå…¨å±":"è¿›å…¥å…¨å±"},u(i.value?"ğŸ”³":"â›¶")+" "+u(i.value?"é€€å‡ºå…¨å±":"å…¨å±"),9,ce),t("button",{onClick:K,class:"btn-secondary",disabled:!c.value.trim()&&!v.value.trim()}," ğŸ”„ äº¤æ¢ ",8,ve),t("button",{onClick:T,class:"btn-secondary"}," ğŸ—‘ï¸ æ¸…ç©º "),t("button",{onClick:W,class:"btn-secondary",disabled:!o.value}," ğŸ“„ å¯¼å‡ºæŠ¥å‘Š ",8,xe),t("button",{onClick:P,class:"btn-secondary"}," ğŸ“„ ç¤ºä¾‹æ•°æ® ")])]),o.value?(g(),x("div",pe,[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"ğŸ“Š æ¯”è¾ƒç»“æœæ¦‚è§ˆ",-1)),t("div",ge,[t("div",me,[t("div",be,u(o.value.stats.added),1),e[11]||(e[11]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"æ–°å¢é¡¹",-1))]),t("div",ye,[t("div",fe,u(o.value.stats.removed),1),e[12]||(e[12]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"åˆ é™¤é¡¹",-1))]),t("div",he,[t("div",ke,u(o.value.stats.modified),1),e[13]||(e[13]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"ä¿®æ”¹é¡¹",-1))]),t("div",_e,[t("div",we,u(o.value.stats.unchanged),1),e[14]||(e[14]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"æœªå˜æ›´",-1))])]),t("div",Se,[t("div",Oe,[e[15]||(e[15]=L(" ç›¸ä¼¼åº¦: ",-1)),t("span",Ve,u(o.value.similarity)+"%",1)]),t("div",Je,[t("div",{class:"bg-primary-600 h-2 rounded-full transition-all duration-500",style:Y({width:o.value.similarity+"%"})},null,4)])])])):h("",!0),t("div",{class:p(["grid grid-cols-1 lg:grid-cols-2 gap-6",{"h-full":i.value}])},[t("div",{class:p(["card",{"h-full flex flex-col":i.value}])},[e[18]||(e[18]=t("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"JSON A (å·¦ä¾§)"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"åŸå§‹JSONæ•°æ®")],-1)),t("div",{class:p(["p-4",{"flex-1 flex flex-col":i.value}])},[O(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=a=>c.value=a),placeholder:"è¯·è¾“å…¥ç¬¬ä¸€ä¸ªJSONæ•°æ®...",class:p(["textarea-field",i.value?"h-full flex-1":"h-96"]),onInput:J},null,34),[[D,c.value]]),t("div",Ce,[t("div",Ne,[t("span",$e," å­—ç¬¦æ•°: "+u(c.value.length),1),c.value.trim()?(g(),x("span",Ee,[t("span",{class:p(["w-2 h-2 rounded-full",b.value?"bg-green-500":"bg-red-500"])},null,2),t("span",{class:p(b.value?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400")},u(b.value?"æ ¼å¼æ­£ç¡®":"æ ¼å¼é”™è¯¯"),3)])):h("",!0)])]),_.value?(g(),x("div",Le,[t("p",je,[e[17]||(e[17]=t("strong",null,"é”™è¯¯:",-1)),L(" "+u(_.value),1)])])):h("",!0)],2)],2),t("div",{class:p(["card",{"h-full flex flex-col":i.value}])},[e[20]||(e[20]=t("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"JSON B (å³ä¾§)"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"å¯¹æ¯”JSONæ•°æ®")],-1)),t("div",{class:p(["p-4",{"flex-1 flex flex-col":i.value}])},[O(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=a=>v.value=a),placeholder:"è¯·è¾“å…¥ç¬¬äºŒä¸ªJSONæ•°æ®...",class:p(["textarea-field",i.value?"h-full flex-1":"h-96"]),onInput:C},null,34),[[D,v.value]]),t("div",Ae,[t("div",Re,[t("span",De," å­—ç¬¦æ•°: "+u(v.value.length),1),v.value.trim()?(g(),x("span",Ue,[t("span",{class:p(["w-2 h-2 rounded-full",y.value?"bg-green-500":"bg-red-500"])},null,2),t("span",{class:p(y.value?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400")},u(y.value?"æ ¼å¼æ­£ç¡®":"æ ¼å¼é”™è¯¯"),3)])):h("",!0)])]),w.value?(g(),x("div",Me,[t("p",ze,[e[19]||(e[19]=t("strong",null,"é”™è¯¯:",-1)),L(" "+u(w.value),1)])])):h("",!0)],2)],2)],2),o.value&&o.value.differences.length>0?(g(),x("div",Be,[e[23]||(e[23]=t("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"ğŸ“‹ è¯¦ç»†å·®å¼‚æŠ¥å‘Š"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"é€é¡¹å·®å¼‚è¯¦æƒ…")],-1)),t("div",Fe,[t("div",Ie,[(g(!0),x(Z,null,ee(o.value.differences,(a,r)=>(g(),x("div",{key:r,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-3"},[t("div",Ke,[t("span",{class:p(["px-2 py-1 rounded text-xs font-medium",I(a.type)])},u(A(a.type)),3),t("span",Te,u(a.path),1)]),t("div",We,[a.oldValue!==void 0?(g(),x("div",Pe,[e[21]||(e[21]=t("span",{class:"text-red-600 dark:text-red-400 font-medium"},"-",-1)),t("span",qe,u(V(a.oldValue)),1)])):h("",!0),a.newValue!==void 0?(g(),x("div",Ge,[e[22]||(e[22]=t("span",{class:"text-green-600 dark:text-green-400 font-medium"},"+",-1)),t("span",He,u(V(a.newValue)),1)])):h("",!0)])]))),128))])])])):h("",!0),o.value&&o.value.differences.length===0?(g(),x("div",Qe,[...e[24]||(e[24]=[t("span",{class:"text-4xl mb-2 block"},"ğŸ‰",-1),t("h3",{class:"text-lg font-semibold text-green-600 dark:text-green-400 mb-2"},"å®Œå…¨ç›¸åŒ",-1),t("p",{class:"text-gray-600 dark:text-gray-400"},"ä¸¤ä¸ªJSONæ•°æ®ç»“æ„å’Œå†…å®¹å®Œå…¨ä¸€è‡´",-1)])])):h("",!0),Q(te,{position:"inline"}),e[25]||(e[25]=X('<div class="card p-6" data-v-e45b2eb0><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4" data-v-e45b2eb0>ğŸ’¡ æ¯”è¾ƒæŠ€å·§</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600 dark:text-gray-400" data-v-e45b2eb0><div data-v-e45b2eb0><h4 class="font-medium text-gray-900 dark:text-white mb-2" data-v-e45b2eb0>æ¯”è¾ƒé€‰é¡¹</h4><ul class="space-y-1" data-v-e45b2eb0><li data-v-e45b2eb0>â€¢ <strong data-v-e45b2eb0>å¿½ç•¥æ•°ç»„é¡ºåº:</strong> æ¯”è¾ƒæ•°ç»„å†…å®¹è€Œä¸è€ƒè™‘å…ƒç´ é¡ºåº</li><li data-v-e45b2eb0>â€¢ <strong data-v-e45b2eb0>å¿½ç•¥å¤§å°å†™:</strong> å­—ç¬¦ä¸²æ¯”è¾ƒæ—¶ä¸åŒºåˆ†å¤§å°å†™</li><li data-v-e45b2eb0>â€¢ <strong data-v-e45b2eb0>å¿½ç•¥ç©ºç™½å­—ç¬¦:</strong> å¿½ç•¥å­—ç¬¦ä¸²é¦–å°¾ç©ºç™½å­—ç¬¦</li></ul></div><div data-v-e45b2eb0><h4 class="font-medium text-gray-900 dark:text-white mb-2" data-v-e45b2eb0>å·®å¼‚ç±»å‹</h4><ul class="space-y-1" data-v-e45b2eb0><li data-v-e45b2eb0>â€¢ <span class="text-green-600" data-v-e45b2eb0>æ–°å¢:</span> å³ä¾§JSONä¸­å­˜åœ¨ï¼Œå·¦ä¾§ä¸å­˜åœ¨</li><li data-v-e45b2eb0>â€¢ <span class="text-red-600" data-v-e45b2eb0>åˆ é™¤:</span> å·¦ä¾§JSONä¸­å­˜åœ¨ï¼Œå³ä¾§ä¸å­˜åœ¨</li><li data-v-e45b2eb0>â€¢ <span class="text-blue-600" data-v-e45b2eb0>ä¿®æ”¹:</span> ä¸¤ä¾§éƒ½å­˜åœ¨ä½†å€¼ä¸åŒ</li></ul></div></div></div>',1))],2))}}),et=se(Xe,[["__scopeId","data-v-e45b2eb0"]]);export{et as default};
