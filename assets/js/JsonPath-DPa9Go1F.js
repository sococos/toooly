import{d as X,j as v,c as Y,l as Z,m as ee,a as i,b,e as t,p as te,u as ae,q as O,s as se,x as P,t as u,v as V,y as re,F as R,r as q,h as g,f as D,A as oe,o as c,_ as le}from"./index-D4AHbMld.js";const ne={key:0,class:"fixed top-4 right-4 z-10"},de={class:"card p-6"},ie={class:"flex flex-wrap items-center gap-4 mb-4"},ce={class:"flex items-center space-x-2"},ue={class:"flex items-center space-x-2"},pe={class:"flex items-center space-x-2"},ve={class:"flex flex-wrap gap-3"},xe=["disabled"],ye=["title"],ge=["disabled"],fe={class:"card"},me={class:"p-4 border-b border-gray-200 dark:border-gray-700"},be={class:"text-sm text-gray-500 dark:text-gray-400"},he={class:"p-4"},ke={class:"space-y-4"},we=["placeholder"],_e={class:"flex flex-wrap gap-2"},$e=["onClick","title"],Se={class:"mt-3 flex items-center justify-between text-sm"},Oe={class:"flex items-center space-x-4"},Ne={class:"text-gray-500 dark:text-gray-400"},Je={key:0,class:"flex items-center space-x-1"},Ee={key:0,class:"mt-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg"},Ae={class:"text-sm text-red-600 dark:text-red-400"},je={class:"p-4 border-b border-gray-200 dark:border-gray-700"},Ce={class:"flex items-center justify-between"},Me={class:"text-sm text-gray-500 dark:text-gray-400"},Pe={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Ve={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-12"},Re={key:1,class:"text-center text-red-600 dark:text-red-400 py-12"},qe={class:"text-sm mt-1"},De={key:2,class:"text-center text-yellow-600 dark:text-yellow-400 py-12"},Ue={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mb-2 font-mono"},Ie={class:"font-mono text-sm"},Le={class:"whitespace-pre-wrap text-gray-900 dark:text-gray-100"},Te={class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},Be={key:0},Fe={key:1},Ke={key:2},ze=X({__name:"JsonPath",setup(He){const x=v(""),y=v(""),h=v("jsonpath"),$=v(""),w=v(""),k=v(!1),p=v([]),N=v(0),d=v(!1),U=v(null),S=v({caseSensitive:!0,showPath:!0}),I=Y(()=>({jsonpath:"JSONPath",simple:"简单路径",regex:"正则表达式"})[h.value]||"JSONPath"),L=()=>({jsonpath:"例如: $.store.book[*].title",simple:"例如: store.book.0.title",regex:"例如: /book.*title/i"})[h.value]||"请输入查询表达式...",T=()=>({jsonpath:[{expression:"$.*",description:"获取根对象的所有属性"},{expression:"$..*",description:"递归获取所有值"},{expression:"$[0]",description:"获取数组第一个元素"},{expression:"$[-1]",description:"获取数组最后一个元素"},{expression:"$[0:3]",description:"获取数组前3个元素"},{expression:"$[?(@.price)]",description:"过滤包含price属性的元素"}],simple:[{expression:"name",description:"获取name属性"},{expression:"users.0.name",description:"获取第一个用户的名称"},{expression:"data.items",description:"获取data下的items"}],regex:[{expression:"/name/i",description:"忽略大小写搜索name"},{expression:"/user.*id/",description:"匹配user开头id结尾的字段"},{expression:"/\\d+/",description:"匹配包含数字的值"}]})[h.value]||[],A=()=>{if(!x.value.trim()){k.value=!1,$.value="";return}try{JSON.parse(x.value),k.value=!0,$.value=""}catch(a){k.value=!1,$.value=a instanceof Error?a.message:"未知错误"}},J=()=>{if(!x.value.trim()||!y.value.trim()||!k.value)return;const a=performance.now();w.value="",p.value=[];try{const e=JSON.parse(x.value);let s=[];switch(h.value){case"jsonpath":s=B(e,y.value);break;case"simple":s=F(e,y.value);break;case"regex":s=K(e,y.value);break}p.value=s,N.value=Math.round(performance.now()-a)}catch(e){w.value=e instanceof Error?e.message:"查询失败"}},B=(a,e)=>{if(e==="$")return[{value:a,path:"$"}];if(e==="$.*"){const n=[];return typeof a=="object"&&a!==null&&Object.keys(a).forEach(o=>{n.push({value:a[o],path:`$.${o}`})}),n}if(e==="$..*")return z(a,"$");const s=e.match(/^\$\.(.+)$/);if(s){const n=s[1];try{const o=j(a,n);return o!==void 0?[{value:o,path:e}]:[]}catch{return[]}}const r=e.match(/^\$\[(\d+)\]$/);if(r){const n=parseInt(r[1]);if(Array.isArray(a)&&n<a.length)return[{value:a[n],path:e}]}const l=e.match(/^\$\[(\d+):(\d+)\]$/);if(l){const n=parseInt(l[1]),o=parseInt(l[2]);if(Array.isArray(a))return a.slice(n,o).map((m,_)=>({value:m,path:`$[${n+_}]`}))}throw new Error("不支持的JSONPath表达式")},F=(a,e)=>{try{const s=j(a,e);return s!==void 0?[{value:s,path:e}]:[]}catch{return[]}},K=(a,e)=>{const s=e.match(/^\/(.+)\/([gim]*)$/);if(!s)throw new Error("无效的正则表达式格式");const r=new RegExp(s[1],s[2]),l=[],n=(o,f)=>{typeof o=="string"?r.test(o)&&l.push({value:o,path:f}):typeof o=="object"&&o!==null&&(Array.isArray(o)?o.forEach((m,_)=>{n(m,`${f}[${_}]`)}):Object.keys(o).forEach(m=>{const _=f?`${f}.${m}`:m;r.test(m)&&l.push({value:o[m],path:_}),n(o[m],_)}))};return n(a,"$"),l},j=(a,e)=>{const s=e.split(".");let r=a;for(const l of s){if(r==null)return;const n=l.match(/^(.+)\[(\d+)\]$/);if(n){const[,o,f]=n;if(r=r[o],Array.isArray(r))r=r[parseInt(f)];else return}else r=r[l]}return r},z=(a,e)=>{const s=[],r=(l,n)=>{s.push({value:l,path:n}),typeof l=="object"&&l!==null&&(Array.isArray(l)?l.forEach((o,f)=>{r(o,`${n}[${f}]`)}):Object.keys(l).forEach(o=>{r(l[o],`${n}.${o}`)}))};return r(a,e),s},C=a=>a===null?"null":Array.isArray(a)?"array":typeof a,H=a=>typeof a=="string"?a:typeof a=="object"?JSON.stringify(a,null,2):String(a),Q=()=>{p.value=[],w.value="",N.value=0},W=()=>{if(p.value.length===0)return;const a={query:{expression:y.value,mode:h.value,timestamp:new Date().toISOString()},results:p.value.map(l=>({path:l.path,value:l.value,type:C(l.value)})),summary:{total:p.value.length,queryTime:N.value}},e=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),s=URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download="json-query-results.json",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)},G=()=>{const a={store:{book:[{category:"reference",author:"Nigel Rees",title:"Sayings of the Century",price:8.95},{category:"fiction",author:"Evelyn Waugh",title:"Sword of Honour",price:12.99},{category:"fiction",author:"Herman Melville",title:"Moby Dick",isbn:"0-553-21311-3",price:8.99}],bicycle:{color:"red",price:19.95}},users:[{id:1,name:"张三",email:"zhangsan@example.com",active:!0},{id:2,name:"李四",email:"lisi@example.com",active:!1}]};x.value=JSON.stringify(a,null,2),y.value="$.store.book[*].title",A()},E=()=>{d.value=!d.value},M=a=>{if(a.key==="Escape"&&d.value){a.preventDefault(),d.value=!1;return}(a.ctrlKey||a.metaKey)&&(a.key==="Enter"&&(a.preventDefault(),J()),a.key==="F11"&&(a.preventDefault(),E()))};return Z(()=>{document.addEventListener("keydown",M)}),ee(()=>{document.removeEventListener("keydown",M)}),(a,e)=>(c(),i("div",{class:g(["space-y-6",{"fullscreen-container":d.value,"bg-white dark:bg-gray-900":d.value}]),ref_key:"containerRef",ref:U},[d.value?(c(),i("div",ne,[t("button",{onClick:E,class:"p-2 bg-red-500 hover:bg-red-600 text-white rounded-full shadow-lg transition-colors",title:"退出全屏"},[...e[5]||(e[5]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):b("",!0),t("div",de,[e[10]||(e[10]=t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"},"JSON路径查询工具",-1)),e[11]||(e[11]=t("p",{class:"text-gray-600 dark:text-gray-400 mb-4"}," 使用JSONPath表达式快速查询和提取JSON数据中的特定内容。支持复杂的查询语法和多种查询模式。 ",-1)),t("div",ie,[t("div",ce,[e[7]||(e[7]=t("label",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"查询模式:",-1)),O(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>h.value=s),class:"input-field w-auto min-w-32"},[...e[6]||(e[6]=[t("option",{value:"jsonpath"},"JSONPath",-1),t("option",{value:"simple"},"简单路径",-1),t("option",{value:"regex"},"正则匹配",-1)])],512),[[se,h.value]])]),t("label",ue,[O(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>S.value.caseSensitive=s),type:"checkbox",class:"rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500"},null,512),[[P,S.value.caseSensitive]]),e[8]||(e[8]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"大小写敏感",-1))]),t("label",pe,[O(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>S.value.showPath=s),type:"checkbox",class:"rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500"},null,512),[[P,S.value.showPath]]),e[9]||(e[9]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"显示路径",-1))])]),t("div",ve,[t("button",{onClick:J,class:"btn-primary",disabled:!x.value.trim()||!y.value.trim()}," 🔍 查询 ",8,xe),t("button",{onClick:E,class:"btn-secondary",title:d.value?"退出全屏":"进入全屏"},u(d.value?"🔳":"⛶")+" "+u(d.value?"退出全屏":"全屏"),9,ye),t("button",{onClick:Q,class:"btn-secondary"}," 🗑️ 清空结果 "),t("button",{onClick:W,class:"btn-secondary",disabled:!p.value.length}," 📄 导出结果 ",8,ge),t("button",{onClick:G,class:"btn-secondary"}," 📄 示例数据 ")])]),t("div",fe,[t("div",me,[e[12]||(e[12]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"查询表达式",-1)),t("p",be," 输入"+u(I.value)+"表达式来查询JSON数据 ",1)]),t("div",he,[t("div",ke,[t("div",null,[O(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>y.value=s),placeholder:L(),class:"input-field font-mono",onKeyup:re(J,["enter"])},null,40,we),[[V,y.value]])]),t("div",_e,[e[13]||(e[13]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"常用表达式:",-1)),(c(!0),i(R,null,q(T(),s=>(c(),i("button",{key:s.expression,onClick:r=>y.value=s.expression,class:"text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 px-2 py-1 rounded transition-colors",title:s.description},u(s.expression),9,$e))),128))])])])]),t("div",{class:g(["grid grid-cols-1 lg:grid-cols-2 gap-6",{"h-full":d.value}])},[t("div",{class:g(["card",{"h-full flex flex-col":d.value}])},[e[15]||(e[15]=t("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"JSON数据"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"要查询的JSON数据")],-1)),t("div",{class:g(["p-4",{"flex-1 flex flex-col":d.value}])},[O(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>x.value=s),placeholder:"请粘贴或输入JSON数据...",class:g(["textarea-field",d.value?"h-full flex-1":"h-96"]),onInput:A},null,34),[[V,x.value]]),t("div",Se,[t("div",Oe,[t("span",Ne," 字符数: "+u(x.value.length),1),x.value.trim()?(c(),i("span",Je,[t("span",{class:g(["w-2 h-2 rounded-full",k.value?"bg-green-500":"bg-red-500"])},null,2),t("span",{class:g(k.value?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400")},u(k.value?"格式正确":"格式错误"),3)])):b("",!0)])]),$.value?(c(),i("div",Ee,[t("p",Ae,[e[14]||(e[14]=t("strong",null,"错误:",-1)),D(" "+u($.value),1)])])):b("",!0)],2)],2),t("div",{class:g(["card",{"h-full flex flex-col":d.value}])},[t("div",je,[t("div",Ce,[t("div",null,[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"查询结果",-1)),t("p",Me,u(p.value.length>0?`找到 ${p.value.length} 个结果`:"查询结果将显示在这里"),1)]),p.value.length>0?(c(),i("div",Pe," 耗时: "+u(N.value)+"ms ",1)):b("",!0)])]),t("div",{class:g(["p-4",{"flex-1 flex flex-col":d.value}])},[p.value.length===0&&!w.value?(c(),i("div",Ve,[...e[17]||(e[17]=[t("span",{class:"text-2xl mb-2 block"},"🔍",-1),t("p",null,"请输入查询表达式来搜索数据",-1)])])):w.value?(c(),i("div",Re,[e[18]||(e[18]=t("span",{class:"text-2xl mb-2 block"},"❌",-1)),e[19]||(e[19]=t("p",{class:"font-semibold"},"查询失败",-1)),t("p",qe,u(w.value),1)])):p.value.length===0?(c(),i("div",De,[...e[20]||(e[20]=[t("span",{class:"text-2xl mb-2 block"},"🔍",-1),t("p",{class:"font-semibold"},"未找到匹配结果",-1),t("p",{class:"text-sm mt-1"},"请尝试修改查询表达式",-1)])])):(c(),i("div",{key:3,class:g(["space-y-3",d.value?"h-full overflow-y-auto":"max-h-96 overflow-y-auto"])},[(c(!0),i(R,null,q(p.value,(s,r)=>(c(),i("div",{key:r,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-3"},[S.value.showPath&&s.path?(c(),i("div",Ue,u(s.path),1)):b("",!0),t("div",Ie,[t("pre",Le,u(H(s.value)),1)]),t("div",Te,[D(" 类型: "+u(C(s.value))+" ",1),typeof s.value=="string"?(c(),i("span",Be," (长度: "+u(s.value.length)+")",1)):b("",!0),Array.isArray(s.value)?(c(),i("span",Fe," (长度: "+u(s.value.length)+")",1)):b("",!0),typeof s.value=="object"&&s.value!==null&&!Array.isArray(s.value)?(c(),i("span",Ke," (属性: "+u(Object.keys(s.value).length)+")",1)):b("",!0)])]))),128))],2))],2)],2)],2),te(oe,{position:"inline"}),e[21]||(e[21]=ae('<div class="card p-6" data-v-9f0bad17><h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4" data-v-9f0bad17>📖 JSONPath语法参考</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-9f0bad17><div data-v-9f0bad17><h4 class="font-medium text-gray-900 dark:text-white mb-3" data-v-9f0bad17>基本语法</h4><div class="space-y-2 text-sm" data-v-9f0bad17><div class="flex items-start space-x-3" data-v-9f0bad17><code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-xs font-mono" data-v-9f0bad17>$</code><span class="text-gray-600 dark:text-gray-400" data-v-9f0bad17>根对象</span></div><div class="flex items-start space-x-3" data-v-9f0bad17><code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-xs font-mono" data-v-9f0bad17>$.store</code><span class="text-gray-600 dark:text-gray-400" data-v-9f0bad17>子属性</span></div><div class="flex items-start space-x-3" data-v-9f0bad17><code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-xs font-mono" data-v-9f0bad17>$[0]</code><span class="text-gray-600 dark:text-gray-400" data-v-9f0bad17>数组第一个元素</span></div><div class="flex items-start space-x-3" data-v-9f0bad17><code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-xs font-mono" data-v-9f0bad17>$[-1]</code><span class="text-gray-600 dark:text-gray-400" data-v-9f0bad17>数组最后一个元素</span></div></div></div><div data-v-9f0bad17><h4 class="font-medium text-gray-900 dark:text-white mb-3" data-v-9f0bad17>高级语法</h4><div class="space-y-2 text-sm" data-v-9f0bad17><div class="flex items-start space-x-3" data-v-9f0bad17><code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-xs font-mono" data-v-9f0bad17>$..*</code><span class="text-gray-600 dark:text-gray-400" data-v-9f0bad17>递归搜索</span></div><div class="flex items-start space-x-3" data-v-9f0bad17><code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-xs font-mono" data-v-9f0bad17>$[0:3]</code><span class="text-gray-600 dark:text-gray-400" data-v-9f0bad17>数组切片</span></div><div class="flex items-start space-x-3" data-v-9f0bad17><code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-xs font-mono" data-v-9f0bad17>$[?@.price]</code><span class="text-gray-600 dark:text-gray-400" data-v-9f0bad17>条件过滤</span></div><div class="flex items-start space-x-3" data-v-9f0bad17><code class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-xs font-mono" data-v-9f0bad17>$.length()</code><span class="text-gray-600 dark:text-gray-400" data-v-9f0bad17>函数调用</span></div></div></div></div></div>',1))],2))}}),We=le(ze,[["__scopeId","data-v-9f0bad17"]]);export{We as default};
